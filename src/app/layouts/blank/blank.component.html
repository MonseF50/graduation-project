<app-navbar [isLogged]="true"></app-navbar>
<div
  [class.padding-top]="paddingTopSection"
  class="pt-[130px] flex flex-col justify-between min-h-screen"
>
  <router-outlet></router-outlet>
  <app-footer></app-footer>
</div>
<div
  class="fixed-shop hidden md:block fixed end-4 top-1/2 -translate-y-[50%] z-2"
>
  <div
    (click)="getCartProduct()"
    class="shop cursor-pointer flex flex-col items-center bg-primary py-4 px-3 rounded-lg text-white w-fit gap-1 mb-3"
  >
    <span>
      <i class="fa-solid fa-cart-shopping text-2xl"></i>
    </span>
    <span> Show Cart</span>
  </div>
  <div
    class="websits flex flex-col gap-1 bg-black text-white p-3 rounded-lg w-fit items-center"
  >
    <span class="font-bold text-xl">140+</span>
    <span>WebSites</span>
  </div>
</div>
<div #progressWrap class="progress">
  <div class="progress-circle">
    <i class="fas fa-arrow-up"></i>
    <svg class="progress-ring" width="60" height="60">
      <circle
        #progressPath
        cx="30"
        cy="30"
        r="28"
        stroke="#00aa63"
        stroke-width="4"
        fill="none"
      ></circle>
    </svg>
  </div>
</div>
<!-- loadding Screen  -->
<ngx-spinner
  bdColor="#00000060"
  template="<img src='/images/Add To Cart Success.gif'/>   "
>
  <p class="text-xl lg:text-3xl font-bold text-white mt-10 capitalize">
    loadding ......
  </p>
</ngx-spinner>
<!-- loadding Screen  -->
<!-- Mini Cart   -->
@if(cartData != null){
<p-drawer
  header="Mini Cart"
  [(visible)]="visible"
  position="left"
  [style]="{ width: '400px' }"
>
  <div class="flex flex-col justify-between">
    <div class="cart-products">
      @for (prod of cartData.products; track prod._id ) {
      <div class="product mb-8 relative">
        <div class="flex gap-5">
          <img
            [src]="prod.product.imageCover"
            class="size-[100px] object-cover"
            [alt]="prod.product.title"
          />
          <div class="data">
            <p class="title cursor-default text-black/60 hover:text-black">
              {{ prod.product.title.split(" ", 2).join(" ") }}
            </p>
            <div class="quantiy inline-flex justify-center items-center my-3">
              <span
                (click)="updateProductQuinty(prod.product._id, prod.count + 1)"
                class="border border-black/10 py-1.5 px-3 cursor-pointer"
                >+</span
              >
              <span class="border border-black/10 py-1.5 px-3">
                {{ prod.count }}
              </span>
              <span
                (click)="updateProductQuinty(prod.product._id, prod.count - 1)"
                class="border border-black/10 py-1.5 px-3 cursor-pointer"
                >-</span
              >
            </div>
            <div class="price inline-flex gap-1.5 ms-3 items-baseline">
              * {{ prod.price }}
            </div>
            <div>
              <span>SubTotal : </span>
              <span class="inline-flex gap-1.5 items-baseline">
                {{ prod.price * prod.count }} <small>EGY</small></span
              >
            </div>
          </div>
        </div>
        <div class="remove absolute end-0 top-1/2 -translate-y-1/2">
          <i
            (click)="deleteProduct(prod.product._id)"
            class="fa-solid fa-trash-can hover:text-red-600 cursor-pointer"
          ></i>
        </div>
      </div>
      }@empty {
      <p class="text-center text-2xl capitalize mb-10">
        there is no products yet
      </p>
      }
    </div>
    <div>
      <p class="flex justify-between border-t border-b border-black/20 py-4">
        <span> SubTotal : </span>
        <span class="text-xl">
          {{ cartData.totalCartPrice }} <small class="text-sm">EGY</small>
        </span>
      </p>
      @if(cartData.products.length != 0){
      <a
        (click)="visible = false"
        routerLink="/cart"
        class="bg-meuted/10 hover:bg-meuted/20 transition block w-4/5 mx-auto py-3 rounded-xl mt-5 text-center font-bold"
        >View Cart</a
      >
      <a
        (click)="visible = false"
        routerLink="/checkOut"
        [queryParams]="{ t: 'visa', cartId: cartData._id }"
        class="bg-primary hover:bg-secondery transition text-white block w-4/5 mx-auto py-3 rounded-xl mt-5 text-center font-bold"
        >Check Out</a
      >
      }
    </div>
  </div>
</p-drawer>
}
<!-- Mini Cart   -->
