<section class="check-out py-5 lg:py-10 px-5 md:px-0">
  <div class="container mx-auto">
    <p>
      Have You A Copon ?
      <a class="underline text-meuted hover:text-primary transition"
        >Click Here To Enter</a
      >
    </p>
    <div
      class="check-container grid grid-cols-1 lg:grid-cols-2 my-10 gap-0 md:gap-8"
    >
      <div class="form py-5 lg:py-8 relative z-10">
        <div class="sticky top-25">
          <h5 class="uppercase mb-5 text-xl">User Details</h5>
          <form [formGroup]="this.fromObj">
            <div class="details w-full mb-5">
              <p-floatlabel variant="on">
                <input
                  formControlName="details"
                  pInputText
                  id="uDeatils"
                  class="w-full!"
                  autocomplete="off"
                />
                <label for="uDeatils">User Details</label>
              </p-floatlabel>
            </div>
            <div class="details w-full mb-5">
              <p-floatlabel variant="on">
                <input
                  formControlName="phone"
                  pInputText
                  id="uPhone"
                  class="w-full"
                  type="number"
                  autocomplete="off"
                />
                <label for="uPhone">User Phone</label>
              </p-floatlabel>
            </div>
            <div class="city w-full">
              <p-select
                formControlName="city"
                [options]="cities"
                placeholder="Select a City"
                class="w-full! md:w-56"
              />
            </div>
          </form>
        </div>
      </div>
      <div class="pay py-5 lg:py-8">
        <div class="inner p-5 rounded-lg border-2 border-black">
          <h5 class="border-b border-black/10 pb-3 uppercase">Your Order</h5>
          <div class="orders mt-8">
            @for (prod of cartData?.products; track prod._id ) {
            <div class="product mb-8 relative">
              <div class="flex gap-5">
                <img
                  [src]="prod.product.imageCover"
                  class="size-[100px] object-cover"
                  [alt]="prod.product.title"
                />
                <div class="data">
                  <p class="title text-black/60 hover:text-black">
                    {{ prod.product.title.split(" ", 2).join(" ") }}
                  </p>
                  <div
                    class="quantiy inline-flex justify-center items-center my-3"
                  >
                    <span
                      (click)="
                        updateProductQuinty(prod.product._id, prod.count + 1)
                      "
                      class="border border-black/10 py-1.5 px-3 cursor-pointer"
                      >+</span
                    >
                    <span class="border border-black/10 py-1.5 px-3">
                      {{ prod.count }}
                    </span>
                    <span
                      (click)="
                        updateProductQuinty(prod.product._id, prod.count - 1)
                      "
                      class="border border-black/10 py-1.5 px-3 cursor-pointer"
                      >-</span
                    >
                  </div>
                  <div class="price inline-flex gap-1.5 ms-3 items-baseline">
                    * {{ prod.price }} <small>EGY</small>
                  </div>
                  <div>
                    <span>SubTotal : </span>
                    <span class="inline-flex gap-1.5 items-baseline">
                      {{ prod.price * prod.count }} <small>EGY</small></span
                    >
                  </div>
                </div>
              </div>
              <div
                class="remove absolute end-3 sm:end-14 bottom-1 sm:top-1/2 sm:-translate-y-1/2"
              >
                <i
                  (click)="deleteProduct(prod.product._id)"
                  class="fa-solid fa-trash-can hover:text-red-600 cursor-pointer"
                ></i>
              </div>
            </div>
            }
          </div>
          <button
            [disabled]="!this.fromObj.valid"
            (click)="onSibmit(this.cartID!, this.fromObj)"
            class="block disabled:cursor-default w-4/5 mx-auto rounded-lg disabled:bg-primary/50 bg-primary hover:bg-secondery transition text-white py-2 text-xl cursor-pointer"
          >
            @if(isLoading){
            <span class="fa-solid fa-spin fa-spinner"></span>
            }@else{
            <span> Place Order </span>
            }
          </button>
          <div
            class="payment border border-black/20 p-6 mt-10 rounded-md relative mb-5"
          >
            <h5
              class="absolute -top-1/2 translate-y-1/2 w-11/12 pt-4 bg-white text-center mx-auto"
            >
              Guaranteed <span class="text-primary">safe</span> checkout
            </h5>
            <div class="parteners flex items-center gap-3 justify-center">
              <a>
                <img
                  src="/images/amazon-pay.png"
                  class="w-[60px]"
                  alt="amazon pay "
                />
              </a>
              <a>
                <img
                  class="w-[60px]"
                  src="/images/American-Express-Color.png"
                  alt="american express"
                />
              </a>
              <a>
                <img
                  src="/images/mastercard.webp"
                  class="w-[60px]"
                  alt="mastercard"
                />
              </a>
              <a>
                <img src="/images/paypal.png" class="w-[60px]" alt="paypal" />
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- tost messaage -->
<p-toast />
